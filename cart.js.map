{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["import { products, addToCartBtn, buyBtn, price, count } from \"./js/refs\";\nimport { openModal } from \"./js/modal\";\nimport { CART_PRODUCT_LS_KEY, WISHLIST_PRODUCT_LS_KEY } from \"./js/constants\";\nimport { getProductById } from \"./js/products-api\";\nimport { updateNavCount, renderCardsList, deleteFromList } from \"./js/helpers\";\nimport { onBuy } from \"./js/handlers\";\n\n\n\nloadCartlistPage(CART_PRODUCT_LS_KEY);\n\nproducts.addEventListener('click', openModal);\naddToCartBtn.addEventListener('click', deleteCard);\nbuyBtn.addEventListener('click', onBuy);\n\nfunction deleteCard() {\n    deleteFromList(CART_PRODUCT_LS_KEY, loadCartlistPage);\n}\n\n\nasync function loadCartlistPage() {\n    updateNavCount(CART_PRODUCT_LS_KEY);\n    updateNavCount(WISHLIST_PRODUCT_LS_KEY);\n    const wishlist = JSON.parse(localStorage.getItem(CART_PRODUCT_LS_KEY)) || [];\n    let totalPrice = 0;\n\n\n    if (wishlist.length === 0) {\n        price.textContent = 0;\n        count.textContent = 0;\n        products.innerHTML = '<li><h2>Кошик порожній.</h2></li>';\n        return;\n    }\n\n    try {\n        const wishProducts = await Promise.all(\n            wishlist.map(({ id, price }) => {\n                totalPrice += price;\n                return getProductById(id)\n            })\n        );\n\n        renderCardsList(wishProducts, products);\n        updateNavCount(CART_PRODUCT_LS_KEY);\n        updateNavCount(WISHLIST_PRODUCT_LS_KEY);\n        price.textContent = +totalPrice.toFixed(2);\n        count.textContent = wishlist.length;\n\n\n    } catch (error) {\n        console.error('Не вдалося завантажити список кошику:', error);\n    }\n}\n\n\n\n"],"names":["loadCartlistPage","products","openModal","addToCartBtn","deleteCard","buyBtn","onBuy","deleteFromList","CART_PRODUCT_LS_KEY","updateNavCount","WISHLIST_PRODUCT_LS_KEY","wishlist","totalPrice","price","count","wishProducts","id","getProductById","renderCardsList","error"],"mappings":"6MASAA,EAAoC,EAEpCC,EAAS,iBAAiB,QAASC,CAAS,EAC5CC,EAAa,iBAAiB,QAASC,CAAU,EACjDC,EAAO,iBAAiB,QAASC,CAAK,EAEtC,SAASF,GAAa,CAClBG,EAAeC,EAAqBR,CAAgB,CACxD,CAGA,eAAeA,GAAmB,CAC9BS,EAAeD,CAAmB,EAClCC,EAAeC,CAAuB,EACtC,MAAMC,EAAW,KAAK,MAAM,aAAa,QAAQH,CAAmB,CAAC,GAAK,GAC1E,IAAII,EAAa,EAGjB,GAAID,EAAS,SAAW,EAAG,CACvBE,EAAM,YAAc,EACpBC,EAAM,YAAc,EACpBb,EAAS,UAAY,oCACrB,MACH,CAED,GAAI,CACA,MAAMc,EAAe,MAAM,QAAQ,IAC/BJ,EAAS,IAAI,CAAC,CAAE,GAAAK,EAAI,MAAAH,CAAK,KACrBD,GAAcC,EACPI,EAAeD,CAAE,EAC3B,CACb,EAEQE,EAAgBH,EAAcd,CAAQ,EACtCQ,EAAeD,CAAmB,EAClCC,EAAeC,CAAuB,EACtCG,EAAM,YAAc,CAACD,EAAW,QAAQ,CAAC,EACzCE,EAAM,YAAcH,EAAS,MAGhC,OAAQQ,EAAO,CACZ,QAAQ,MAAM,wCAAyCA,CAAK,CAC/D,CACL"}