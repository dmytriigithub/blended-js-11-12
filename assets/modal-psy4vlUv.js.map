{"version":3,"file":"modal-psy4vlUv.js","sources":["../../src/js/constants.js","../../src/js/refs.js","../../src/js/products-api.js","../../src/js/render-function.js","../../src/js/helpers.js","../../src/js/storage.js","../../src/js/modal.js"],"sourcesContent":["export const CATEGORY_LIST_URL = `https://dummyjson.com/products/category-list`;\nexport const PRODUCTS_LIST_URL = `https://dummyjson.com/products`;\nexport const PRODUCTS_CATEGORY_LIST_URL = `https://dummyjson.com/products/category`;\nexport const PRODUCT_SEARCH_URL = `https://dummyjson.com/products/search`;\n\nexport let currentPage = 1;\nexport const limit = 12;\n\nexport const CART_PRODUCT_LS_KEY = 'cart';\nexport const WISHLIST_PRODUCT_LS_KEY = 'wishlist';\n\n","// Home\nexport const categories = document.querySelector('.categories');\nexport const products = document.querySelector('.products');\nexport const notFound = document.querySelector('.not-found');\nexport const searchForm = document.querySelector('.search-form');\nexport const searchFormBtnClear = document.querySelector('.search-form__btn-clear');\nexport const loadMoreBtn = document.querySelector('.load-more-btn');\n\n//Modal\nexport const modal = document.querySelector('.modal');\nexport const modalProduct = document.querySelector('.modal-product');\nexport const modalCloseBtn = document.querySelector('.modal__close-btn');\nexport const addToCartBtn = document.querySelector('.modal-product__btn--cart');\nexport const addToWishlistBtn = document.querySelector('.modal-product__btn--wishlist');\n\n//Wishlist\n\n//Cart\n\nexport const buyBtn = document.querySelector('.cart-summary__btn');\nexport const price = document.querySelector('[data-price]');\nexport const count = document.querySelector('[data-count]');","import axios from 'axios';\nimport { limit } from './constants';\n\n// 1. https://dummyjson.com/docs/products - документація бекенду, розділ продукти\n// 2. https://dummyjson.com/products?limit=10&skip=10 - отримати всі продукти з пагінацією\n// 3. https://dummyjson.com/products/1 - отримати один продукт по ID\n// 4. https://dummyjson.com/products/search?q=nail - пошук продукту по ключовому слову\n// 5. https://dummyjson.com/products/category-list - отримати список категорій продуктів\n// 6. https://dummyjson.com/products/category/smartphones - отримати продукти по категорії\n\n\n\nexport const getCategoryList = async () => {\n    const response = await axios.get('https://dummyjson.com/products/category-list');\n    return response.data;\n}\n\nexport const getProducts = async (currentPage = 1) => {\n\n    const response = await axios.get('https://dummyjson.com/products/', {\n        params: {\n            limit,\n            skip: (currentPage - 1) * limit\n        }\n    })\n    console.log(response.data);  //-------------------log\n    return response.data;\n}\n\nexport const getProductsByCategory = async (category, currentPage = 1) => {\n\n    const response = await axios.get(`https://dummyjson.com/products/category/${category}`, {\n        params: {\n            limit,\n            skip: (currentPage - 1) * limit\n        }\n    })\n    console.log(response.data);  //-------------------log\n    return response.data;\n}\n\nexport const getProductById = async (id) => {\n    const response = await axios.get(`https://dummyjson.com/products/${id}`);\n    return response.data;\n}\n\nexport const getProductBySearch = async (q, currentPage = 1) => {\n\n    const response = await axios.get('https://dummyjson.com/products/search', {\n        params: {\n            q,\n            limit,\n            skip: (currentPage - 1) * limit\n        }\n    })\n    console.log(response.data);  //-------------------log\n    return response.data;\n}\n","export function categoriesItemMarkup(arr) {\n    return arr.map(item => `\n        <li class=\"categories__item\">\n            <button class=\"categories__btn\" type=\"button\">${item}</button>\n        </li>\n        `).join('');\n}\n\n\nexport function productsCardMarkup(arr) {\n    return arr.map(({ id, title, thumbnail, brand, category, price }) => `\n        <li class=\"products__item\" data-id=\"${id}\">\n            <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n            <p class=\"products__title\">${title}</p>\n            <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span>${brand}</p>\n            <p class=\"products__category\">Category: ${category}</p>\n            <p class=\"products__price\">Price: ${price}$</p>\n        </li>\n        `).join('');\n}\n\n\nexport function productModalMarkup({ title, images, description, shippingInformation, returnPolicy, price, tags }) {\n    const tagsList = tags.map(item => `\n        <li class=\"modal-product__tags-item\">${item}</li>\n        `).join('');\n\n    return `\n        <img class=\"modal-product__img\" src=\"${images[0]}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${tagsList}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${price}$</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>\n        `;\n}\n\n\n\n\n\n","import { products, notFound } from \"./refs\";\nimport { productsCardMarkup } from \"./render-function\";\nimport { CART_PRODUCT_LS_KEY, WISHLIST_PRODUCT_LS_KEY } from \"./constants\";\nimport { getProductById } from \"./products-api\";\nimport { closeModal } from \"./modal\";\n\nexport function renderCardsList(items) {\n    products.innerHTML = productsCardMarkup(items);\n\n    if (!items.length) {\n        notFound.classList.add('not-found--visible');\n    } else {\n        notFound.classList.remove('not-found--visible');\n    }\n}\n\nexport function clearFilterBtn() {\n    document.querySelectorAll('.categories__btn').forEach(btn =>\n        btn.classList.remove('categories__btn--active')\n    );\n}\n\nexport function updateNavCount(key) {\n    const countElement = document.querySelector(`[data-${key}-count]`);\n    const items = JSON.parse(localStorage.getItem(key)) || [];\n    countElement.textContent = items.length;\n}\n\n\nexport async function deleteFromList(key, loadlistPage) {\n    {\n        const wishlist = JSON.parse(localStorage.getItem(key)) || [];\n\n        try {\n            const wishProducts = await Promise.all(\n                wishlist.map(({ id }) => getProductById(id))\n            );\n\n            renderCardsList(wishProducts, products);\n            updateNavCount(key);\n\n        } catch (error) {\n            console.error('Не вдалося завантажити список бажаного:', error);\n        }\n\n        loadlistPage();\n        closeModal();\n\n    }\n}\n\n\nexport function hidden(products) {\n    const loadMoreBtn = document.querySelector('.load-more-btn');\n\n\n    const { skip, limit, total } = products;\n\n    if (skip + limit < total) {\n        loadMoreBtn.classList.remove('is-hidden');\n    } else {\n        loadMoreBtn.classList.add('is-hidden');\n\n    }\n}","import { updateNavCount } from \"./helpers\";\nimport { getProductById } from \"./products-api\";\n\nexport async function toggleStorageItem(productId, key, button, label) {\n    let items = JSON.parse(localStorage.getItem(key)) || [];\n    const index = items.findIndex(({ id }) => id === productId);\n\n    if (index === -1) {\n        try {\n            const product = await getProductById(productId)\n            items.push(product);\n            localStorage.setItem(key, JSON.stringify(items));\n            button.textContent = `Remove from ${label}`;\n            updateNavCount(key);\n        }\n        catch (error) {\n            console.log(error.message);\n\n        }\n\n    } else {\n        items = items.filter(({ id }) => id !== productId);\n        localStorage.setItem(key, JSON.stringify(items));\n        button.textContent = `Add to ${label}`;\n        updateNavCount(key);\n    }\n\n}","import { getProductById } from \"./products-api\";\nimport { modal, modalProduct, modalCloseBtn, addToCartBtn, addToWishlistBtn } from \"./refs\";\nimport { productModalMarkup } from \"./render-function\";\nimport { CART_PRODUCT_LS_KEY, WISHLIST_PRODUCT_LS_KEY } from \"./constants\";\nimport { toggleStorageItem } from \"./storage\";\n\nmodalCloseBtn.addEventListener(\"click\", closeModal);\nmodal.addEventListener(\"click\", (event) => {\n    if (event.target === modal) closeModal();\n});\n\nexport let currentProductId = null;\n\nexport async function openModal(event) {\n    const target = event.target;\n    const parent = target.closest(\".products__item\");\n    if (!parent) return;\n\n    currentProductId = +parent.dataset.id;\n\n\n    try {\n        const product = await getProductById(currentProductId);\n\n        modalProduct.innerHTML = productModalMarkup(product);\n        modal.classList.add(\"modal--is-open\");\n\n        updateButtonState(addToCartBtn, CART_PRODUCT_LS_KEY, \"Cart\");\n        updateButtonState(addToWishlistBtn, WISHLIST_PRODUCT_LS_KEY, \"Wishlist\");\n\n        document.addEventListener(\"keydown\", handleEscKey);\n\n        addToCartBtn.addEventListener(\"click\", handleCartToggle);\n        addToWishlistBtn.addEventListener(\"click\", handleWishlistToggle);\n\n    } catch (error) {\n        console.log(error.message);\n\n    }\n}\n\nexport function closeModal() {\n    modal.classList.remove(\"modal--is-open\");\n    modalProduct.innerHTML = \"\";\n\n    document.removeEventListener(\"keydown\", handleEscKey);\n    addToCartBtn.removeEventListener(\"click\", handleCartToggle);\n    addToWishlistBtn.removeEventListener(\"click\", handleWishlistToggle);\n}\n\nfunction handleEscKey(event) {\n    if (event.key === \"Escape\") {\n        closeModal()\n    };\n}\n\n\nfunction updateButtonState(button, key, type) {\n    const list = JSON.parse(localStorage.getItem(key)) || [];\n    const inStorage = list.some(({ id }) => id === currentProductId);\n    button.textContent = inStorage ? `Remove from ${type}` : `Add to ${type}`;\n}\n\n\nfunction handleCartToggle() {\n    toggleStorageItem(currentProductId, CART_PRODUCT_LS_KEY, addToCartBtn, \"Cart\");\n}\n\n\nexport function handleWishlistToggle() {\n    toggleStorageItem(currentProductId, WISHLIST_PRODUCT_LS_KEY, addToWishlistBtn, \"Wishlist\");\n}"],"names":["currentPage","limit","CART_PRODUCT_LS_KEY","WISHLIST_PRODUCT_LS_KEY","categories","products","notFound","searchForm","searchFormBtnClear","loadMoreBtn","modal","modalProduct","modalCloseBtn","addToCartBtn","addToWishlistBtn","buyBtn","price","count","getCategoryList","axios","getProducts","response","getProductsByCategory","category","getProductById","id","getProductBySearch","q","categoriesItemMarkup","arr","item","productsCardMarkup","title","thumbnail","brand","productModalMarkup","images","description","shippingInformation","returnPolicy","tags","tagsList","renderCardsList","items","clearFilterBtn","btn","updateNavCount","key","countElement","deleteFromList","loadlistPage","wishlist","wishProducts","error","closeModal","hidden","skip","total","toggleStorageItem","productId","button","label","product","event","currentProductId","openModal","parent","updateButtonState","handleEscKey","handleCartToggle","handleWishlistToggle","type","inStorage"],"mappings":"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"}