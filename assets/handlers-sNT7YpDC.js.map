{"version":3,"file":"handlers-sNT7YpDC.js","sources":["../../src/js/handlers.js"],"sourcesContent":["import { getProducts, getProductsByCategory, getProductBySearch } from \"./products-api\";\nimport { CART_PRODUCT_LS_KEY, currentPage } from \"./constants\";\nimport { renderCardsList, clearFilterBtn, hidden } from \"./helpers\";\nimport { products } from \"./refs\";\nimport { productsCardMarkup } from \"./render-function\";\n\n//Home\n\nlet page = currentPage;\nlet search = '';\n\nexport async function handlerCategoriesFilter(event) {\n    const target = event.target;\n\n    if (target.classList.contains('categories__btn--active')) return;\n\n    const category = target.textContent.trim().toLowerCase();\n    page = 1;\n\n    clearFilterBtn();\n\n    try {\n        const fetchData = category !== 'all'\n            ? await getProductsByCategory(category)\n            : await getProducts();\n\n        renderCardsList(fetchData.products);\n        hidden(fetchData);\n        target.classList.add('categories__btn--active');\n\n    } catch (error) {\n        console.error(\"Помилка:\", error);\n    }\n\n\n}\n\nexport async function handlerClearInput(form) {\n    clearFilterBtn()\n    form.reset();\n    page = 1;\n\n    try {\n        const data = await getProducts()\n        renderCardsList(data.products);\n        search = '';\n        hidden(data);\n\n    } catch (error) {\n        console.error(\"Помилка:\", error);\n    }\n}\n\n\nexport async function handlerInputSearch(event) {\n    event.preventDefault();\n    clearFilterBtn();\n    const form = event.target;\n    const searchValue = form.elements.searchValue.value.trim().toLowerCase();\n    page = 1;\n\n    if (!searchValue) {\n        return;\n    }\n\n    try {\n        const searchProducts = await getProductBySearch(searchValue);\n        renderCardsList(searchProducts.products);\n        hidden(searchProducts);\n        search = searchValue;\n    } catch (error) {\n        console.error(\"Помилка:\", error);\n    }\n\n    form.reset();\n}\n\nexport function onBuy() {\n    const wishlist = JSON.parse(localStorage.getItem(CART_PRODUCT_LS_KEY)) || [];\n    if (!wishlist.length) {\n        alert('у кошику немає товарів');\n    } else {\n        alert('успішне придбання товарів');\n    }\n\n}\n\nexport async function onLoadMore() {\n    page++;\n    const category = [...document.querySelectorAll('.categories__btn')].find(btn =>\n        btn.classList.contains('categories__btn--active')\n    );\n\n    console.log(category);\n\n\n\n\n    if (category) {\n        const categoryValue = category.textContent.trim().toLowerCase();\n\n        try {\n            const fetchData = categoryValue !== 'all'\n                ? await getProductsByCategory(categoryValue, page)\n                : await getProducts(page);\n\n            products.insertAdjacentHTML('beforeend', productsCardMarkup(fetchData.products));\n            hidden(fetchData);\n\n        } catch (error) {\n            console.error(\"Помилка:\", error);\n        }\n\n    } else if (search) {\n        try {\n\n            const searchProducts = await getProductBySearch(search, page);\n            products.insertAdjacentHTML('beforeend', productsCardMarkup(searchProducts.products));\n            hidden(searchProducts);\n\n        } catch (error) {\n            console.error(\"Помилка:\", error);\n        }\n\n    } else {\n        try {\n\n            const fetchData = await getProducts(page);\n            products.insertAdjacentHTML('beforeend', productsCardMarkup(fetchData.products));\n            hidden(fetchData);\n\n        } catch (error) {\n            console.error(\"Помилка:\", error);\n        }\n    }\n}\n\n"],"names":["page","currentPage","search","handlerCategoriesFilter","event","target","category","clearFilterBtn","fetchData","getProductsByCategory","getProducts","renderCardsList","hidden","error","handlerClearInput","form","data","handlerInputSearch","searchValue","searchProducts","getProductBySearch","onBuy","CART_PRODUCT_LS_KEY","onLoadMore","btn","categoryValue","products","productsCardMarkup"],"mappings":"uGAQA,IAAIA,EAAOC,EACPC,EAAS,GAEN,eAAeC,EAAwBC,EAAO,CACjD,MAAMC,EAASD,EAAM,OAErB,GAAIC,EAAO,UAAU,SAAS,yBAAyB,EAAG,OAE1D,MAAMC,EAAWD,EAAO,YAAY,KAAM,EAAC,YAAW,EACtDL,EAAO,EAEPO,IAEA,GAAI,CACA,MAAMC,EAAYF,IAAa,MACzB,MAAMG,EAAsBH,CAAQ,EACpC,MAAMI,EAAW,EAEvBC,EAAgBH,EAAU,QAAQ,EAClCI,EAAOJ,CAAS,EAChBH,EAAO,UAAU,IAAI,yBAAyB,CAEjD,OAAQQ,EAAO,CACZ,QAAQ,MAAM,WAAYA,CAAK,CAClC,CAGL,CAEO,eAAeC,EAAkBC,EAAM,CAC1CR,EAAgB,EAChBQ,EAAK,MAAK,EACVf,EAAO,EAEP,GAAI,CACA,MAAMgB,EAAO,MAAMN,EAAa,EAChCC,EAAgBK,EAAK,QAAQ,EAC7Bd,EAAS,GACTU,EAAOI,CAAI,CAEd,OAAQH,EAAO,CACZ,QAAQ,MAAM,WAAYA,CAAK,CAClC,CACL,CAGO,eAAeI,EAAmBb,EAAO,CAC5CA,EAAM,eAAc,EACpBG,IACA,MAAMQ,EAAOX,EAAM,OACbc,EAAcH,EAAK,SAAS,YAAY,MAAM,KAAI,EAAG,cAG3D,GAFAf,EAAO,EAEH,EAACkB,EAIL,IAAI,CACA,MAAMC,EAAiB,MAAMC,EAAmBF,CAAW,EAC3DP,EAAgBQ,EAAe,QAAQ,EACvCP,EAAOO,CAAc,EACrBjB,EAASgB,CACZ,OAAQL,EAAO,CACZ,QAAQ,MAAM,WAAYA,CAAK,CAClC,CAEDE,EAAK,MAAK,EACd,CAEO,SAASM,GAAQ,EACH,KAAK,MAAM,aAAa,QAAQC,CAAmB,CAAC,GAAK,IAC5D,OAGV,MAAM,2BAA2B,EAFjC,MAAM,wBAAwB,CAKtC,CAEO,eAAeC,GAAa,CAC/BvB,IACA,MAAMM,EAAW,CAAC,GAAG,SAAS,iBAAiB,kBAAkB,CAAC,EAAE,KAAKkB,GACrEA,EAAI,UAAU,SAAS,yBAAyB,CACxD,EAOI,GALA,QAAQ,IAAIlB,CAAQ,EAKhBA,EAAU,CACV,MAAMmB,EAAgBnB,EAAS,YAAY,KAAM,EAAC,YAAW,EAE7D,GAAI,CACA,MAAME,EAAYiB,IAAkB,MAC9B,MAAMhB,EAAsBgB,EAAezB,CAAI,EAC/C,MAAMU,EAAYV,CAAI,EAE5B0B,EAAS,mBAAmB,YAAaC,EAAmBnB,EAAU,QAAQ,CAAC,EAC/EI,EAAOJ,CAAS,CAEnB,OAAQK,EAAO,CACZ,QAAQ,MAAM,WAAYA,CAAK,CAClC,CAEJ,SAAUX,EACP,GAAI,CAEA,MAAMiB,EAAiB,MAAMC,EAAmBlB,EAAQF,CAAI,EAC5D0B,EAAS,mBAAmB,YAAaC,EAAmBR,EAAe,QAAQ,CAAC,EACpFP,EAAOO,CAAc,CAExB,OAAQN,EAAO,CACZ,QAAQ,MAAM,WAAYA,CAAK,CAClC,KAGD,IAAI,CAEA,MAAML,EAAY,MAAME,EAAYV,CAAI,EACxC0B,EAAS,mBAAmB,YAAaC,EAAmBnB,EAAU,QAAQ,CAAC,EAC/EI,EAAOJ,CAAS,CAEnB,OAAQK,EAAO,CACZ,QAAQ,MAAM,WAAYA,CAAK,CAClC,CAET"}